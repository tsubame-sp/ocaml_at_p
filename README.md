# ocaml_at_p
OCaml@p : OCamlにおけるデバッグ出力機構 / A debugging printer for OCaml

OCamlプログラムのデバッグ出力をサポートするツールです．このパッケージを用いてコンパイルすると，型定義から型に対応した出力関数定義を自動生成します．また，マーカ[@p]のついた式を出力する関数呼び出しを自動で挿入します．

注 : 本システムでは他のattributeを用いたPPXツールとの併用は考慮していません．

#使用方法

##インストール方法
install -> make install

uninstall -> make uninstall

TODO : opam release

##OCaml@pを用いたコンパイル方法

a.mlをOCaml@pでコンパイルするとき

ocamlfind ocamlc -package ocaml@p -linkpkg a.ml

##コードの記述方法

###出力マーカ [@p]

OCaml@pでは返す値を出力したい式にマーカ[@p]を記述することで，出力することができます．


```
let add x y = x + y [@p x] [@p y] [@p]

let a = add 1 10
```

ここで，`[@p x],[@p y],[@p]`は式`x + y`に付与されています．`[@p x],[@p y]`はそれぞれ`x,y`の値を，`[@p]`は`x + y`の値を出力します．このプログラムを事項した時の出力結果は以下のようになります．

```
1 			<- [@p x] の出力
10			<- [@p y] の出力
11			<- [@p]   の出力
```

###外部モジュールチェック [@@@ppopen]

本システムでは他のmlファイルで定義されたモジュール内で定義されたデータ型を出力する際に，出力関数が定義されているか確かめる術がないため，Unboundエラーが出てしまい、エラー内容がわかりづらい．そこで，そのモジュールのmlファイルがOCaml@pを用いてコンパイルされていることを、ユーザが出力を行うファイルのトップレベルに`[@@@ppopen モジュール名]`と記述するようにした．
